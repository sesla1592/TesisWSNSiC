<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:hs="http://xmlns.jcp.org/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/Templateadmin.xhtml">

<ui:define name="contenido">

 <h:head>
        <title><ui:insert name="title">Lista de Sensores</ui:insert></title>
        <h:outputStylesheet library="css" name="jsfcrud.css"/>
        <h:outputScript library="js" name="jsfcrud.js"/>
    </h:head>

		<h:form id="SensorListForm">
             <!-- Breadcrumbs-->
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="../dashboard.xhtml">Dashboard</a>
            </li>
            <li class="breadcrumb-item active">Listado de Sensores</li>
          </ol>

			<h2>Nodo:</h2><h3>#{sensorControlador.nodo.nombre}</h3>
			<p:panel header="Listada de Sensores">
				<p:dataTable id="datalist" value="#{sensorControlador.ltsSensor}"
					var="sensor" paginator="true" rowKey="#{item.id}" rows="10"
					rowsPerPageTemplate="10,20,30,40,50">
					<p:column>
						<f:facet name="header">
							<h:outputText value="Id" />
						</f:facet>
						<h:outputText value="#{sensor.id}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Nombre" />
						</f:facet>
						<h:outputText value="#{sensor.nombreCompleto}" />
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="Estado" />
						</f:facet>
						<h:outputText value="Activo" rendered="#{sensor.estado == true}" />
						<h:outputText value="Inactivo"
							rendered="#{sensor.estado == false}" />
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="Detalle" />
						</f:facet>
						<h:outputText value="#{sensor.descripcion}" />
					</p:column>

					<p:column>
						<f:facet name="header">
							<h:outputText value="Eliminar" />
						</f:facet>
						<p:commandButton title="x" />

					</p:column>

					<p:column>
						<f:facet name="header">
							<h:outputText value="Editar" />
						</f:facet>
						<p:commandButton title="x" update=":sensorDetail"
							action="#{sensorControlador.editarSensor(sensor)}"
							onclick="PF('sensorDialog').show();" />

					</p:column>

					<f:facet name="footer">
						<p:commandLink onclick="PF('crearsensorDialog').show();">Agregar Sensor</p:commandLink>

					</f:facet>

				</p:dataTable>
			</p:panel>
		</h:form>

		<p:dialog header="Editar Sensor" widgetVar="sensorDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
        <p:outputPanel id="sensorDetail" style="text-align:center;">
            <h:form>
            <p:panelGrid  columns="2" >
                <h:outputLabel value="Nombre del Sensor"/><h:inputText id="nombre" value="#{sensorControlador.sensorSelected.nombre}" size="50"/>
				
				<h:outputLabel value="Descripcion"/><h:inputText value="#{sensorControlador.sensorSelected.descripcion}" size="80" />
				
				<h:outputLabel value="Estado del sensor"/><h:selectOneMenu value = "#{sensorControlador.sensorEstado}"><f:selectItem itemValue = "true" itemLabel = "activo" /><f:selectItem itemValue = "false" itemLabel = "inactivo" /></h:selectOneMenu> 	
                
            </p:panelGrid>
            
	            <p:commandButton action="#{sensorControlador.guardarEditar()}" update="SensorListForm" oncomplete="PF('sensorDialog').hide()" title="Guardar">
				</p:commandButton>
            </h:form>
        </p:outputPanel>
    </p:dialog>
    
    <p:dialog header="Crear Sensor" widgetVar="crearsensorDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
        <p:outputPanel id="crearsensorDetail" style="text-align:center;">
            <h:form>
            <p:panelGrid columns="2">
				<h:outputLabel value="Nombre del Sensor"/><h:inputText id="nombre" value="#{sensorControlador.sensor.nombre}" size="50"/>
				
				<h:outputLabel value="Descripcion"/><h:inputText id="descripcion" value="#{sensorControlador.sensor.descripcion}" size="80"/>
						
				</p:panelGrid>
				
				<br/>

<h:commandButton action="#{sensorControlador.guardarSensor()}" value="Guardar" />
            
	           
            </h:form>
        </p:outputPanel>
    </p:dialog>

    </ui:define>
</ui:composition>